{% extends 'base.html' %}

{% block title %}Search by user{% endblock %}
{% block body %}
      <div class="col-md-12 col-lg-8 container">
        <h4 class="mb-3" >Search for the latest device configuration file</h4>
          <form method="post" class="needs-validation" novalidate>
              <div class="row g-3">
                  <div class="col-sm-6 input-group">
<!--              <label for="firstname" class="form-label">First name</label>-->
                      {% if  firstname=='': -%}
                      <input type="text" class="form-control" name="searchdevice" id="searchdevice" placeholder="Enter ipaddress value="" required="">
                      <button  class="btn btn-outline-primary" type="submit" name="submit-btn" id="search-btn" value="search" disabled>Edit</button>
                      {% else -%}
                          <input type="text" class="form-control" name="searchdevice" id="searchdevice1" placeholder="Enter ipaddress" value="{{username}}" required="">
                          <button  class="btn btn-outline-primary" type="submit" name="submit-btn" id="search-btn_secondary" value="search" disabled>Edit</button>
                      {% endif -%}
                      <div class="invalid-feedback">
                        Valid ipaddress is required.
                      </div>
                  </div>
              </div>
          </form>

<!--                  <div class="col-sm-4">-->
<!--&lt;!&ndash;                  <label for="lastname" class="form-label">Last name</label>&ndash;&gt;-->
<!--                      {% if  lastname=='': %}-->
<!--                      <input type="text" class="form-control" name="lastname" id="lastname" placeholder="Lastname" value="" required="">-->
<!--                      {% else %}-->
<!--                      <input type="text" class="form-control" name="lastname" id="lastname2" placeholder="Lastname" value="{{lastname}}" required="">-->
<!--                      {% endif %}-->
<!--                      <div class="invalid-feedback">-->
<!--                          Valid last name is required.-->
<!--                      </div>-->
<!--                  </div>-->
<!--                  <div class="col-sm-2 col">-->
<!--                      <button  class="btn pull-right btn-primary" type="submit" name="submit-btn" id="search-btn" value="search" >Search-->
<!--                      </button>-->
<!--                  </div>-->


<!--            <div class="col-12">-->
<!--              <label for="username" class="form-label">Username</label>-->
<!--              <div class="input-group has-validation">-->
<!--                <span class="input-group-text">@</span>-->
<!--                <input type="text" class="form-control" id="username" placeholder="Username" required="">-->
<!--              <div class="invalid-feedback">-->
<!--                  Your username is required.-->
<!--                </div>-->
<!--              </div>-->
<!--            </div>-->
          {% if userid_list|length > 1 -%}
              <form method="post">
                  <div class="col-sm-4">
                      <label for="userid" class="form-label"></label>
                      <div class="input-group has-validation">
                          <span class="input-group-text">@</span>
                          <select class="form-select" id="userid" name="userid" required="">
                              {% if userid_list|length  > 0: -%}
                              {% for el in userid_list -%}
                              <option value="{{el}}">{{el}}</option>
                              {% endfor -%}
                              {% else: -%}
                              <option value="">Choose Userid</option>
                              {% endif -%}
                          </select>
                          {% if userid_list|length  > 0: -%}
                          <button  class="btn btn-outline-primary" type="submit" id="edit-btn" name="submit-btn" value="edit">Edit</button>
                          {% else: -%}
                          <button  class="btn btn-outline-secondary" type="submit" id="edit-btn-disabled" name="submit-btn" value="edit" disabled>Edit</button>
                          {% endif -%}
                      </div>
                      <div class="invalid-feedback">
                          Please select userid.
                      </div>
                  </div>
                  <div class="col-sm-2 col">

                  </div>

              <script>
              function getValue() {
              var select = document.getElementById("userid");
              var value = select.value;
              window.location.href="http://localhost/edit_user/"+value";
<!--              alert(value);                }-->
                </script>
              <br>
<!--              <button class="w-100 btn btn-primary btn-lg" type="submit" onclick="getValue()" disabled>Continue to checkout</button>-->
              </form>
          {% endif %}

      </div>
<script>
$("#searchdevice1").keyup(function(event){
var s = $(this).val()
if (s.match("(^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$)"))
{
$("#searchdevice1").attr("class","form-control is-valid");
$('#search-btn_secondary')[0].disabled = false;
}
else if ($(this).val() == "")
{
$("#searchdevice1").attr("class","form-control");
$('#search-btn_secondary')[0].disabled = true;

}
else
{
$("#searchdevice1").attr("class","form-control is-invalid");
$('#search-btn_secondary')[0].disabled = true;

}
});

$("#searchdevice1").click(function(event){
var s = $(this).val()
if (s.match("(^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$)"))
{
$("#searchdevice1").attr("class","form-control is-valid");
$('#search-btn_secondary')[0].disabled = false;
}
else if ($(this).val() == "")
{
$("#searchdevice1").attr("class","form-control");
$('#search-btn_secondary')[0].disabled = true;
}
else
{
$("#searchdevice1").attr("input","form-control is-invalid");
$('#search-btn_secondary')[0].disabled = true;
}
});
</script>
{% endblock %}